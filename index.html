<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
<!--     <div class='tweets-container'>
      <ol class='tweets'>
      </ol>
    </div> -->
    <script>

      $(document).ready(function(){
        var $body = $('body');
        $body.html('');


        // var startIndex = streams.home.length - 1;
        // addNewTweets(startIndex,0);

        scheduleRefreshTweets(0);

        

      }); //end of ready function

      var addNewTweets = function(startIndex,endIndex) {
        var index = startIndex;
        while(index >= endIndex){
          var tweet = streams.home[index];
          var $tweet = $('<div></div>');
          $tweet.text('@' + tweet.user + ': ' + tweet.message);
          $tweet.appendTo($('body'));
          index -= 1;
        }
      }

      var scheduleRefreshTweets = function(endIndex) {
        var startIndex = streams.home.length - 1;
        addNewTweets(startIndex,endIndex);

        setTimeout(function () {
          return scheduleRefreshTweets(endIndex);
        }, Math.random() * 1500);        
      }



    </script>
  </body>
</html>
